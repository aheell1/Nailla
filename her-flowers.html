<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>3D Colorful Flower</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: black;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: sans-serif;
      perspective: 1000px;
    }

    .flower {
      position: relative;
      width: 30vmin;
      height: 30vmin;
      transform-style: preserve-3d;
      animation: rotateFlower 15s linear infinite;
    }

    .petal {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
    }

    .box {
      display: flex;
      justify-content: center;
      align-items: center;
      transform-style: preserve-3d;
    }

    .shape {
      width: 0.5em;
      height: 0.5em;
      border-radius: 50%;
      background-color: currentColor;
      box-shadow: 0 0 5px currentColor;
    }

    @keyframes rotateFlower {
      from {
        transform: rotateY(0deg);
      }
      to {
        transform: rotateY(360deg);
      }
    }
  </style>
</head>
<body>
  <div class="flower"></div>

  <script>
    console.clear();
    var doc = document;
    var flower = doc.querySelector('.flower');

    var maxParts = 20;
    var maxPetalsDef = 6;
    var maxPetals = maxPetalsDef;

    var partsFontStepDef = 25 / maxParts;
    var partsFontStep = partsFontStepDef;
    var huetStep = 150 / maxParts;

    createFlower();

    function createFlower() {
      var angle = 360 / maxPetals;
      for (var i = 0; i < maxPetals; i++) {
        var petal = createPetal();
        var currAngle = angle * i + 'deg';
        var transform = 'transform: rotateY(' + currAngle + ') rotateX(-30deg) translateZ(9vmin)';
        petal.setAttribute('style', transform);
        flower.appendChild(petal);
      }
    }

    function createPetal() {
      var box = createBox(null, 0);
      var petal = doc.createElement('div');
      petal.classList.add('petal');

      for (var i = 1; i <= maxParts; i++) {
        newBox = createBox(box, i);
        box = newBox;
      }

      petal.appendChild(box);
      return petal;
    }

    function createBox(box, pos) {
      var fontSize = partsFontStep * (maxParts - pos) + 'vmin';
      var half = maxParts / 2;
      var bright = '50';

      if (pos < half + 1) {
        fontSize = partsFontStep * pos + 'vmin';
      } else {
        bright = 10 + 40 / half * (maxParts - pos);
      }

      var color = 'hsl(' + huetStep * pos + ', 100%, ' + bright + '%)';

      var newShape = doc.createElement('div');
      newShape.classList.add('shape');

      var newBox = doc.createElement('div');
      newBox.classList.add('box');
      var boxStyle = [
        'color: ' + color,
        'font-size: ' + fontSize
      ].join(';');
      newBox.setAttribute('style', boxStyle);

      if (box) {
        newBox.appendChild(box);
      }

      newBox.appendChild(newShape);
      return newBox;
    }
  </script>
</body>
</html>
